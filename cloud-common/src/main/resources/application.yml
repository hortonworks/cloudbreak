server.servlet.context-path: "/cb"

management:
  endpoints:
    web:
      base-path: "/"
      exposure:
        include: info,health,prometheus
      path-mapping:
        prometheus: metrics
  endpoint:
    metrics:
      enabled: true
      export:
        prometheus:
          enabled: true
    prometheus:
      enabled: true


spring:
  freemarker:
    template-loader-path: file:/etc/cloudbreak,classpath:/
    prefer-file-system-access: false
  datasource:
    maxActive: 30
  data:
    web:
      pageable:
        default-page-size: 100
        max-page-size: 1000
rest:
  debug: false
cert:
  validation: true
  ignorePreValidation: false

cb:
  uaa.startup.timeout.sec: 300
  enabledplatforms: AZURE,AWS,GCP,OPENSTACK
  platform.default.rootVolumeSize:
    AWS: 50
    AZURE: 30
    GCP: 50
  enabled.linux.types: redhat6,redhat7,centos6,centos7,amazonlinux,amazonlinux2
  publicip:
  etc.config.dir: /etc/cloudbreak
  threadpool:
    core.size: 40
    capacity.size: 4000
  intermediate.threadpool:
    core.size: 40
    capacity.size: 4000
  container.threadpool:
    core.size: 40
    capacity.size: 4000

  host.discovery.custom.hostname.enabled: false

  cert:
    dir: /certs/

  smtp.sender:
    host:
    port: 25
    username:
    password:
    from: no-reply@sequenceiq.com

  db.env:
    user: postgres
    pass:
    db: cbdb
    schema: public
    cert.file: database.crt
    ssl: false

  aws:
    spotinstances.enabled: true
    disabled.instance.types: c5d,f1,i3,m5d,p3dn,r5d,z1d
    hostkey.verify: false
    external.id: provision-ambari
    cf.template.new.path: templates/aws-cf-stack.ftl
    default.inbound.security.group:
    vpc:

  azure:
    host.name.prefix.length: 255

  os:
    enable.autoimport: true
    import:
      root.url.pattern: http://public-repo-1.hortonworks.com/HDP/cloudbreak/%s.img
      from.format: qcow2
      disk.format: qcow2
      container.format: bare



  yarn:
    domain: default.com
    defaultQueue: "default"
    defaultLifeTime: -1

  blueprint:
     defaults: >
                EDW-ETL: Apache Hive, Apache Spark 2=hdp26-etl-edw-spark2;
                EDW-Analytics: Apache Hive 2 LLAP, Apache Zeppelin=hdp26-edw-analytics;
                Data Science: Apache Spark 2, Apache Zeppelin=hdp26-data-science-spark2;
                Flow Management: Apache NiFi, Apache NiFi Registry=hdf33-flow-management;
                HDF 3.4 Flow Management: Apache NiFi, Apache NiFi Registry=hdf34-flow-management;
                Messaging Management: Apache Kafka=hdf33-messaging-kafka;
                Data Lake: Apache Ranger, Apache Atlas, Apache Hive Metastore=hdp26-shared-services;
                Data Lake: Apache Ranger, Apache Hive Metastore HA=hdp26-shared-services-ha;
                HDP 3.1 - Data Science: Apache Spark 2, Apache Zeppelin=hdp31-data-science-spark2;
                HDP 3.1 - EDW-Analytics: Apache Hive 2 LLAP, Apache Zeppelin=hdp31-edw-analytics;
                HDP 3.1 - Data Lake: Apache Ranger, Apache Hive Metastore=hdp31-shared-services;
                HDP 3.1.5 - Data Science: Apache Spark 2, Apache Zeppelin=hdp315-data-science-spark2;
                HDP 3.1.5 - EDW-Analytics: Apache Hive 2 LLAP, Apache Zeppelin=hdp315-edw-analytics;
                HDP 3.1.5 - Data Lake: Apache Ranger, Apache Hive Metastore=hdp315-shared-services
     internal: >
                Messaging Management: Apache Kafka, Schema Registry=hdf33-messaging-kafka-registry;

  template.defaults: minviable-gcp,minviable-azure-managed-disks,minviable-aws;
  custom.user.data: |
    touch /tmp/custom-user-data
    date >> /tmp/custom-user-data

  mail:
    smtp:
      auth: true
      type: smtp
      starttls.enable: true
  success.cluster.installer.mail.template.path: templates/cluster-installer-mail-success.ftl
  failed.cluster.installer.mail.template.path: templates/cluster-installer-mail-fail.ftl

  docker:
    container:
      yarn.ambari.server: hortonworks/yarn-cloudbreak-ambari-server:2.5.0-v1
      yarn.ambari.agent: hortonworks/yarn-cloudbreak-ambari-agent:2.5.0-v1
      yarn.ambari.db: hortonworks/yarn-cloudbreak-postgres:9.4.1

  arm:
    template.path: templates/arm-v2.ftl
    parameter.path: templates/parameters.ftl

  openstack:
    heat.template.path: templates/openstack-heat.ftl
    api.debug: false
    hostkey.verify: false

  max:
    azure.resource.name.length: 120
    gcp.resource.name.length: 63
    aws.resource.name.length: 50
    openstack.resource.name.length: 120
    yarn.resource.name.length: 63

    salt.new.service.retry: 90
    salt.recipe.execution.retry: 90

  address.resolving.timeout: 60000

  eventbus.threadpool.core.size: 100
  cloud.api.executorservice.pool.size: 40

  platform.default:
    variants: OPENSTACK:HEAT
    regions: AWS:eu-west-1,AZURE:North Europe,GCP:europe-west1,YARN:default,CUMULUS_YARN:default,MOCK:USA

  gcp:
    hostkey.verify: false
    disk.encryption.url: https://cloud-certs.storage.googleapis.com/google-cloud-csek-ingress.pem
    stopStart.batch.size: 10
    create.batch.size: 5

  nginx:
    port: 9443

  hive.database:
    user: hive
    db: hive
    port: 5432

  ranger.database:
    user: ranger
    db: ranger
    port: 5432

  paywall:
    username:
    password:

  ambari:
    entries:
      2.6:
        version: 2.6.2.59
        repo:
          redhat6:
            baseurl: https://archive.cloudera.com/p/ambari/2.x/2.6.2.59/centos6
            gpgkey: https://archive.cloudera.com/p/ambari/2.x/2.6.2.59/centos6/RPM-GPG-KEY/RPM-GPG-KEY-Jenkins
          redhat7:
            baseurl: https://archive.cloudera.com/p/ambari/2.x/2.6.2.59/centos7
            gpgkey: https://archive.cloudera.com/p/ambari/2.x/2.6.2.59/centos7/RPM-GPG-KEY/RPM-GPG-KEY-Jenkins
      2.7:
        version: 2.7.3.39
        repo:
          redhat7:
            baseurl: https://archive.cloudera.com/p/ambari/2.x/2.7.3.39/centos7
            gpgkey: https://archive.cloudera.com/p/ambari/2.x/2.7.3.39/centos7/RPM-GPG-KEY/RPM-GPG-KEY-Jenkins
          amazonlinux2:
            baseurl: https://archive.cloudera.com/p/ambari/2.x/2.7.3.39/amazonlinux2
            gpgkey: https://archive.cloudera.com/p/ambari/2.x/2.7.3.39/amazonlinux2/RPM-GPG-KEY/RPM-GPG-KEY-Jenkins
      "[2.7.5]":
        version: 2.7.5.0
        repo:
          redhat7:
            baseurl: https://archive.cloudera.com/p/ambari/centos7/2.x/updates/2.7.5.0/
            gpgkey: https://archive.cloudera.com/p/ambari/centos7/2.x/updates/2.7.5.0/RPM-GPG-KEY/RPM-GPG-KEY-Jenkins
          amazonlinux2:
            baseurl: https://archive.cloudera.com/p/ambari/amazonlinux2/2.x/updates/2.7.5.0/
            gpgkey: https://archive.cloudera.com/p/ambari/amazonlinux2/2.x/updates/2.7.5.0/RPM-GPG-KEY/RPM-GPG-KEY-Jenkins
    database:
      port: 5432
      user: ambari
      db: ambari

  hdp:
    entries:
      2.5:
        version: 2.5.5.0
        minAmbari: 2.6
        repo:
          stack:
            repoid: HDP-2.5
            redhat6: https://archive.cloudera.com/p/HDP/2.x/2.5.5.0/centos6
            redhat7: https://archive.cloudera.com/p/HDP/2.x/2.5.5.0/centos7
            repository-version: 2.5.5.0-157
            vdf-redhat6: https://archive.cloudera.com/p/HDP/2.x/2.5.5.0/centos6/HDP-2.5.5.0-157.xml
            vdf-redhat7: https://archive.cloudera.com/p/HDP/2.x/2.5.5.0/centos7/HDP-2.5.5.0-157.xml
          util:
            repoid: HDP-UTILS-1.1.0.21
            redhat6: https://archive.cloudera.com/p/HDP-UTILS/1.1.0.21/repos/centos6
            redhat7: https://archive.cloudera.com/p/HDP-UTILS/1.1.0.21/repos/centos7
      2.6:
        version: 2.6.5.0
        minAmbari: 2.6
        repo:
          stack:
            repoid: HDP-2.6
            redhat6: https://archive.cloudera.com/p/HDP/2.x/2.6.5.0/centos6
            redhat7: https://archive.cloudera.com/p/HDP/2.x/2.6.5.0/centos7
            repository-version: 2.6.5.0-292
            vdf-redhat6: https://archive.cloudera.com/p/HDP/2.x/2.6.5.0/centos6/HDP-2.6.5.0-292.xml
            vdf-redhat7: https://archive.cloudera.com/p/HDP/2.x/2.6.5.0/centos7/HDP-2.6.5.0-292.xml
          util:
            repoid: HDP-UTILS-1.1.0.22
            redhat6: https://archive.cloudera.com/p/HDP-UTILS/1.1.0.22/repos/centos6
            redhat7: https://archive.cloudera.com/p/HDP-UTILS/1.1.0.22/repos/centos7
      3.0:
        version: 3.0.1.0
        minAmbari: 2.7
        repo:
          stack:
            repoid: HDP-3.0
            redhat7: https://archive.cloudera.com/p/HDP/3.x/3.0.1.0/centos7
            amazonlinux2: https://archive.cloudera.com/p/HDP/3.x/3.0.1.0/amazonlinux2
            repository-version: 3.0.1.0-187
            vdf-redhat7: https://archive.cloudera.com/p/HDP/3.x/3.0.1.0/centos7/HDP-3.0.1.0-187.xml
            vdf-amazonlinux2: https://archive.cloudera.com/p/HDP/3.x/3.0.1.0/amazonlinux2/HDP-3.0.1.0-187.xml
          util:
            repoid: HDP-UTILS-1.1.0.22
            redhat7: https://archive.cloudera.com/p/HDP-UTILS/1.1.0.22/repos/centos7
            amazonlinux2: https://archive.cloudera.com/p/HDP-UTILS/1.1.0.22/repos/amazonlinux2
      3.1:
        version: 3.1.0.0
        minAmbari: 2.7
        repo:
          stack:
            repoid: HDP-3.1
            redhat7: https://archive.cloudera.com/p/HDP/3.x/3.1.0.0/centos7
            amazonlinux2: https://archive.cloudera.com/p/HDP/3.x/3.1.0.0/amazonlinux2
            repository-version: 3.1.0.0-78
            vdf-redhat7: https://archive.cloudera.com/p/HDP/3.x/3.1.0.0/centos7/HDP-3.1.0.0-78.xml
            vdf-amazonlinux2: https://archive.cloudera.com/p/HDP/3.x/3.1.0.0/amazonlinux2/HDP-3.1.0.0-78.xml
          util:
            repoid: HDP-UTILS-1.1.0.22
            redhat7: https://archive.cloudera.com/p/HDP-UTILS/1.1.0.22/repos/centos7
            amazonlinux2: https://archive.cloudera.com/p/HDP-UTILS/1.1.0.22/repos/amazonlinux2
      "[3.1.5]":
        version: 3.1.5.0
        minAmbari: 2.7.5
        repo:
          stack:
            repoid: HDP-3.1.5
            redhat7: https://archive.cloudera.com/p/HDP/centos7/3.x/updates/3.1.5.6091
            amazonlinux2: https://archive.cloudera.com/p/HDP/amazonlinux2/3.x/updates/3.1.5.6091
            repository-version: 3.1.5.6091-7
            vdf-redhat7: https://archive.cloudera.com/p/HDP/centos7/3.x/updates/3.1.5.6091/HDP-3.1.5.6091-7.xml
            vdf-amazonlinux2: https://archive.cloudera.com/p/HDP/amazonlinux2/3.x/updates/3.1.5.6091/HDP-3.1.5.6091-7.xml
          util:
            repoid: HDP-UTILS-1.1.0.22
            redhat7: https://archive.cloudera.com/p/HDP-UTILS/1.1.0.22/repos/centos7
            amazonlinux2: https://archive.cloudera.com/p/HDP-UTILS/1.1.0.22/repos/amazonlinux2
  hdf:
    entries:
      3.1:
        version: 3.1.2.0-7
        min-ambari: 2.6
        repo:
          stack:
            repoid: HDF-3.1
            redhat6: https://archive.cloudera.com/p/HDF/3.x/3.1.2.0/centos6
            redhat7: https://archive.cloudera.com/p/HDF/3.x/3.1.2.0/centos7
            repository-version: 3.1.2.0-7
            vdf-redhat6: https://archive.cloudera.com/p/HDF/3.x/3.1.2.0/centos6/HDF-3.1.2.0-7.xml
            vdf-redhat7: https://archive.cloudera.com/p/HDF/3.x/3.1.2.0/centos7/HDF-3.1.2.0-7.xml
          util:
            repoid: HDP-UTILS-1.1.0.22
            redhat6: https://archive.cloudera.com/p/HDP-UTILS/1.1.0.22/repos/centos6
            redhat7: https://archive.cloudera.com/p/HDP-UTILS/1.1.0.22/repos/centos7
          mpacks:
            redhat6:
              - mpackUrl: https://archive.cloudera.com/p/HDF/3.x/3.1.2.0/centos6/tars/hdf_ambari_mp/hdf-ambari-mpack-3.1.2.0-7.tar.gz
                stackDefault: true
            redhat7:
              - mpackUrl: https://archive.cloudera.com/p/HDF/3.x/3.1.2.0/centos7/tars/hdf_ambari_mp/hdf-ambari-mpack-3.1.2.0-7.tar.gz
                stackDefault: true
      3.2:
        version: 3.2.0.0-520
        min-ambari: 2.7
        repo:
          stack:
            repoid: HDF-3.2
            amazonlinux2: https://archive.cloudera.com/p/HDF/3.x/3.2.0.0/amazonlinux2
            redhat7: https://archive.cloudera.com/p/HDF/3.x/3.2.0.0/centos7
            repository-version: 3.2.0.0-520
            vdf-redhat7: https://archive.cloudera.com/p/HDF/3.x/3.2.0.0/centos7/HDF-3.2.0.0-520.xml
            vdf-amazonlinux2: https://archive.cloudera.com/p/HDF/3.x/3.2.0.0/amazonlinux2/HDF-3.2.0.0-520.xml
          util:
            repoid: HDP-UTILS-1.1.0.22
            redhat7: https://archive.cloudera.com/p/HDP-UTILS/1.1.0.22/repos/centos7
            amazonlinux2: https://archive.cloudera.com/p/HDP-UTILS/1.1.0.22/repos/amazonlinux2
          mpacks:
            amazonlinux2:
              - mpackUrl: https://archive.cloudera.com/p/HDF/3.x/3.2.0.0/amazonlinux2/tars/hdf_ambari_mp/hdf-ambari-mpack-3.2.0.0-520.tar.gz
                stackDefault: true
            redhat7:
              - mpackUrl: https://archive.cloudera.com/p/HDF/3.x/3.2.0.0/centos7/tars/hdf_ambari_mp/hdf-ambari-mpack-3.2.0.0-520.tar.gz
                stackDefault: true
      3.3:
        version: 3.3.1.0-10
        min-ambari: 2.7
        repo:
          stack:
            repoid: HDF-3.3
            amazonlinux2: https://archive.cloudera.com/p/HDF/3.x/3.3.1.0/amazonlinux2
            redhat7: https://archive.cloudera.com/p/HDF/3.x/3.3.1.0/centos7
            repository-version: 3.3.1.0-10
            vdf-redhat7: https://archive.cloudera.com/p/HDF/3.x/3.3.1.0/centos7/HDF-3.3.1.0-10.xml
            vdf-amazonlinux2: https://archive.cloudera.com/p/HDF/3.x/3.3.1.0/amazonlinux2/HDF-3.3.1.0-10.xml
          util:
            repoid: HDP-UTILS-1.1.0.22
            redhat7: https://archive.cloudera.com/p/HDP-UTILS/1.1.0.22/repos/centos7
            amazonlinux2: https://archive.cloudera.com/p/HDP-UTILS/1.1.0.22/repos/amazonlinux2
          mpacks:
            amazonlinux2:
              - mpackUrl: https://archive.cloudera.com/p/HDF/3.x/3.3.1.0/amazonlinux2/tars/hdf_ambari_mp/hdf-ambari-mpack-3.3.1.0-10.tar.gz
                stackDefault: true
            redhat7:
              - mpackUrl: https://archive.cloudera.com/p/HDF/3.x/3.3.1.0/centos7/tars/hdf_ambari_mp/hdf-ambari-mpack-3.3.1.0-10.tar.gz
                stackDefault: true
      3.4:
        version: 3.4.1.124-5
        min-ambari: 2.7
        repo:
          stack:
            repoid: HDF-3.4
            redhat7: https://archive.cloudera.com/p/HDF/patch/3.x/3.4.1.124-5/centos7
            repository-version: 3.4.1.124-5
            vdf-redhat7: https://archive.cloudera.com/p/HDF/patch/3.x/3.4.1.124-5/centos7/HDF-3.4.1.124-5.xml
          util:
            repoid: HDP-UTILS-1.1.0.22
            redhat7: https://archive.cloudera.com/p/HDP-UTILS/1.1.0.22/repos/centos7
          mpacks:
            redhat7:
              - mpackUrl: https://archive.cloudera.com/p/HDF/patch/3.x/3.4.1.124-5/centos7/tars/hdf_ambari_mp/hdf-ambari-mpack-3.4.1.124-5.tar.gz
                stackDefault: true
      3.5:
        version: 3.5.2.0-99
        min-ambari: 2.7
        repo:
          stack:
            repoid: HDF-3.5
            amazonlinux2: https://archive.cloudera.com/p/HDF/amazonlinux2/3.x/updates/3.5.2.0
            redhat7: https://archive.cloudera.com/p/HDF/centos7/3.x/updates/3.5.2.0
            repository-version: 3.5.2.0-99
            vdf-redhat7: https://archive.cloudera.com/p/HDF/centos7/3.x/updates/3.5.2.0/HDF-3.5.2.0-99.xml
            vdf-amazonlinux2: https://archive.cloudera.com/p/HDF/amazonlinux2/3.x/updates/3.5.2.0/HDF-3.5.2.0-99.xml
          util:
            repoid: HDP-UTILS-1.1.0.22
            redhat7: https://archive.cloudera.com/p/HDP-UTILS/1.1.0.22/repos/centos7
            amazonlinux2: https://archive.cloudera.com/p/HDP-UTILS/1.1.0.22/repos/amazonlinux2
          mpacks:
            amazonlinux2:
              - mpackUrl: https://archive.cloudera.com/p/HDF/amazonlinux2/3.x/updates/3.5.2.0/tars/hdf_ambari_mp/hdf-ambari-mpack-3.5.2.0-99.tar.gz
                stackDefault: true
            redhat7:
              - mpackUrl: https://archive.cloudera.com/p/HDF/centos7/3.x/updates/3.5.2.0/tars/hdf_ambari_mp/hdf-ambari-mpack-3.5.2.0-99.tar.gz
                stackDefault: true
  smartsense.configure: false
  smartsense.enabled: true
  smartsense.id.pattern: A-9990%s-C-%s

  structuredevent:
    rest:
      enabled: true
      contentlogging: true

  image.catalog:
    url: https://cloudbreak-imagecatalog.s3.amazonaws.com/v2-dev-cb-image-catalog.json
    cache.ttl: 15

  instance:
    packages:
      - name: salt
        prewarmed: false
        grain: saltversion
      - name: salt-bootstrap
        prewarmed: false
        command: "salt-bootstrap version"
      - name: stack
        pkgName: hdp-select,hdf-select
        prewarmed: true
      - name: ambari
        pkgName: ambari-agent
        prewarmed: true

# configuration for BlueprintPortConfigCollector.java
blueprintServicePorts:
  - service: HIVE_SERVER
    configName: hive-site
    portKey: hive.server2.thrift.http.port
  - service: HIVE_SERVER_INTERACTIVE
    configName: hive-interactive-site
    portKey: hive.server2.thrift.http.port
  - service: SPARK_HISTORY_SERVER
    configName: spark-defaults
    portKey: spark.history.ui.port
  - service: ZEPPELIN
    configName: zeppelin-config
    portKey: zeppelin.server.port
  - service: WEBHDFS
    configName: hdfs-site
    host-key: dfs.namenode.http-address
  - service: RESOURCEMANAGER_WEB
    configName: yarn-site
    hostKey: yarn.resourcemanager.webapp.address
  - service: RANGER
    configName: ranger-admin-site
    portKey: ranger.service.http.port
