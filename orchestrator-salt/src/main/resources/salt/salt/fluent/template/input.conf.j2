{%- from 'fluent/settings.sls' import fluent with context %}
# CONFIGURED BY SALT - do not edit
{% if providerPrefix != "databus" or fluent.dbusReportDeploymentLogs %}
<worker {{ workerIndex }}>
<source>
  @type tail
  format none
  path /var/log/messages
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-messages.log.pos
  tag {{providerPrefix}}.syslog
  read_from_head true
</source>
<source>
  @type tail
  format none
  path /var/log/cloud-init.log
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-cloud-init.log.pos
  tag {{providerPrefix}}.cloud-init
  read_from_head true
</source>
<source>
  @type tail
  format none
  path /var/log/salt/master
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-salt_master.log.pos
  tag {{providerPrefix}}.salt_master
  read_from_head true
</source>
<source>
  @type tail
  format none
  path /var/log/salt/minion
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-salt_minion.log.pos
  tag {{providerPrefix}}.salt_minion
  read_from_head true
</source>
<source>
  @type tail
  format none
  path /var/log/salt/api
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-salt_api.log.pos
  tag {{providerPrefix}}.salt_api
  read_from_head true
</source>
<source>
  @type tail
  format none
  path /var/log/saltboot.log
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-saltboot.log.pos
  tag {{providerPrefix}}.saltboot
  read_from_head true
</source>
<source>
  @type tail
  format none
  path /var/log/waagent.log
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-waagent.log.pos
  tag {{providerPrefix}}.waagent
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serverLogFolderPrefix}}/cloudera-scm-server/cloudera-scm-server.log
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-cloudera-scm-server.log.pos
  tag {{providerPrefix}}.cloudera-scm-server-log
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serverLogFolderPrefix}}/cloudera-scm-server/cloudera-scm-server.out
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-cloudera-scm-server-out.log.pos
  tag {{providerPrefix}}.cloudera-scm-server-out
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.agentLogFolderPrefix}}/cloudera-scm-agent/cloudera-scm-agent.log
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-cloudera-scm-agent.log.pos
  tag {{providerPrefix}}.cloudera-scm-agent-log
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.agentLogFolderPrefix}}/cloudera-scm-agent/cloudera-scm-agent*.out
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-cloudera-scm-agent-out.log.pos
  tag {{providerPrefix}}.cloudera-scm-agent-out
  read_from_head true
</source>
<source>
  @type tail
  format none
  path /var/log/*/*mgmt-cmf-MGMT-ALERTPUBLISHER*.log.out
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-cmf-mgmt-alertpublisher-out.log.pos
  tag {{providerPrefix}}.MGMT-ALERTPUBLISHER
  read_from_head true
</source>
<source>
  @type tail
  format none
  path /var/log/*/*mgmt-cmf-MGMT-EVENTSERVER*.log.out
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-cmf-mgmt-eventserver-out.log.pos
  tag {{providerPrefix}}.MGMT-EVENTSERVER
  read_from_head true
</source>
<source>
  @type tail
  format none
  path /var/log/*/*mgmt-cmf-MGMT-HOSTMONITOR*.log.out
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-cmf-mgmt-hostmonitor-out.log.pos
  tag {{providerPrefix}}.MGMT-HOSTMONITOR
  read_from_head true
</source>
<source>
  @type tail
  format none
  path /var/log/*/*mgmt-cmf-MGMT-NAVIGATOR*.log.out
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-cmf-mgmt-navigator-out.log.pos
  tag {{providerPrefix}}.MGMT-NAVIGATOR
  read_from_head true
</source>
<source>
  @type tail
  format none
  path /var/log/*/*mgmt-cmf-MGMT-NAVIGATORMETASERVER*.log.out
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-cmf-mgmt-navigatormetaserver-out.log.pos
  tag {{providerPrefix}}.MGMT-NAVIGATORMETASERVER
  read_from_head true
</source>
<source>
  @type tail
  format none
  path /var/log/*/*mgmt-cmf-MGMT-REPORTSMANAGER*.log.out
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-cmf-mgmt-reportsmanager-out.log.pos
  tag {{providerPrefix}}.MGMT-REPORTSMANAGER
  read_from_head true
</source>
<source>
  @type tail
  format none
  path /var/log/*/*mgmt-cmf-MGMT-SERVICEMONITOR*.log.out
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-cmf-mgmt-servicemonitor-out.log.pos
  tag {{providerPrefix}}.MGMT-SERVICEMONITOR
  read_from_head true
</source>
<source>
  @type tail
  format none
  path /var/log/*/*mgmt-cmf-MGMT-TELEMETRYPUBLISHER*.log.out
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-cmf-mgmt-telemetrypublisher-out.log.pos
  tag {{providerPrefix}}.MGMT-TELEMETRYPUBLISHER
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/*/*cmf*-yarn*-NODEMANAGER*.log.out
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-cmf-yarn-nodemanager-out.log.pos
  tag {{providerPrefix}}.YARN-NODEMANAGER
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/*/*cmf*-yarn*-JOBHISTORY*.log.out
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-cmf-yarn-jobhistory-out.log.pos
  tag {{providerPrefix}}.YARN-JOBHISTORY
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/*/*cmf*-yarn*-RESOURCEMANAGER*.log.out
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-cmf-yarn-resourcemanager-out.log.pos
  tag {{providerPrefix}}.YARN-RESOURCEMANAGER
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/*/*cmf*-hive*-HIVEMETASTORE*.log.out
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-cmf-hive-hms-out.log.pos
  tag {{providerPrefix}}.HIVE-HIVEMETASTORE
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/*/*cmf*-hive*-HIVESERVER2*.log.out
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-cmf-hive-hs2-out.log.pos
  tag {{providerPrefix}}.HIVE-HIVESERVER2
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/*/*cmf*-hdfs*-DATANODE*.log.out
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-cmf-hdfs-datanode-out.log.pos
  tag {{providerPrefix}}.HDFS-DATANODE
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/*/*cmf*-hdfs*-NAMENODE*.log.out
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-cmf-hdfs-namenode-out.log.pos
  tag {{providerPrefix}}.HDFS-NAMENODE
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/*/*cmf*-hdfs*-SECONDARYNAMENODE*.log.out
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-cmf-hdfs-snn-out.log.pos
  tag {{providerPrefix}}.HDFS-SECONDARYNAMENODE
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/knox/gateway/gateway.log*
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-knox-gateway.log.pos
  tag {{providerPrefix}}.KNOX-GATEWAY
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/knox/gateway/gateway-audit.log*
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-knox-gateway-audit.log.pos
  tag {{providerPrefix}}.KNOX-GATEWAY_AUDIT
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/knox/idbroker/gateway.log*
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-knox-idbroker-gateway.log.pos
  tag {{providerPrefix}}.KNOX-IDBROKER_GATEWAY
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/knox/idbroker/gateway-audit.log*
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-knox-idbroker-gateway-audit.log.pos
  tag {{providerPrefix}}.KNOX-IDBROKER_GATEWAY_AUDIT
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/*/*cmf*-solr*-SOLR_SERVER*.log.out
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-cmf-solr-server-out.log.pos
  tag {{providerPrefix}}.SOLR-SOLR_SERVER
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/atlas/application.log
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-atlas-application.log.pos
  tag {{providerPrefix}}.ATLAS-ATLAS_SERVER
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/*/admin/ranger-admin-*-ranger.log
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-ranger-admin.log.pos
  tag {{providerPrefix}}.RANGER-RANGER_ADMIN
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/*/tagsync/tagsync.log
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-ranger-tagsync.log.pos
  tag {{providerPrefix}}.RANGER-RANGER_TAGSYNC
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/*/usersync/usersync-*-ranger.log
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-ranger-usersync.log.pos
  tag {{providerPrefix}}.RANGER-RANGER_USERSYNC
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/*/*cmf*-oozie*-OOZIE_SERVER*.log.out
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-cmf-oozie-server-out.log.pos
  tag {{providerPrefix}}.OOZIE-OOZIE_SERVER
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/*/*cmf*-zookeeper*-SERVER*.log
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-cmf-zookeeper-server.log.pos
  tag {{providerPrefix}}.ZOOKEEPER-SERVER
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/*/spark-history-server*.log
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-spark-history-server.log.pos
  tag {{providerPrefix}}.SPARK-HISTORY_SERVER
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/*/spark2-history-server*.log
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-spark2-history-server.log.pos
  tag {{providerPrefix}}.SPARK2-HISTORY_SERVER
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/zeppelin/zeppelin-zeppelin*.log
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-zeppelin-server.log.pos
  tag {{providerPrefix}}.ZEPPELIN_SERVER
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/*/impalad.*impala.log.INFO.*
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-impalad-info.log.pos
  tag {{providerPrefix}}.IMPALA-impalad_INFO
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/*/impalad.*impala.log.WARNING.*
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-impalad-warning.log.pos
  tag {{providerPrefix}}.IMPALA-impalad_WARNING
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/*/impalad.*impala.log.ERROR.*
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-impalad-error.log.pos
  tag {{providerPrefix}}.IMPALA-impalad_ERROR
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/*/catalogd.*impala.log.INFO.*
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-catalogd-info.log.pos
  tag {{providerPrefix}}.IMPALA-catalogd_INFO
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/*/catalogd.*impala.log.WARNING.*
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-catalogd-warning.log.pos
  tag {{providerPrefix}}.IMPALA-catalogd_WARNING
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/*/catalogd.*impala.log.ERROR.*
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-catalogd-error.log.pos
  tag {{providerPrefix}}.IMPALA-catalogd_ERROR
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/*/statestored.*impala.log.INFO.*
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-statestored-info.log.pos
  tag {{providerPrefix}}.IMPALA-statestored_INFO
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/*/statestored.*impala.log.WARNING.*
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-statestored-warning.log.pos
  tag {{providerPrefix}}.IMPALA-statestored_WARNING
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/*/statestored.*impala.log.ERROR.*
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-statestored-error.log.pos
  tag {{providerPrefix}}.IMPALA-statestored_ERROR
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/*/streams-messaging-manager*.log
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-streams-messaging-manager.log.pos
  exclude_path ["{{fluent.serviceLogFolderPrefix}}/*/streams-messaging-manager-ui*.log"]
  tag {{providerPrefix}}.STREAMS_MESSAGING_MANAGER-server
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/*/streams-messaging-manager-ui*.log
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-streams-messaging-manager-ui.log.pos
  tag {{providerPrefix}}.STREAMS_MESSAGING_MANAGER-ui
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/*/streams-messaging-manager*.err
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-streams-messaging-manager.err.pos
  exclude_path ["{{fluent.serviceLogFolderPrefix}}/*/streams-messaging-manager-ui*.err"]
  tag {{providerPrefix}}.STREAMS_MESSAGING_MANAGER-server_ERROR
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/*/streams-messaging-manager-ui*.err
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-streams-messaging-manager-ui.err.pos
  tag {{providerPrefix}}.STREAMS_MESSAGING_MANAGER-ui_ERROR
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/schemaregistry/registry*.log
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-schemaregistry.log.pos
  tag {{providerPrefix}}.SCHEMAREGISTRY_registry
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/kafka/kafka-broker*.log
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-kafka-broker.log.pos
  tag {{providerPrefix}}.KAFKA_kafka-broker
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/kafka/ranger_kafka*.log
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-ranger-kafka.log.pos
  tag {{providerPrefix}}.KAFKA_ranger
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/hbase/*hbase-HBASETHRIFTSERVER*.log.out
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-hbase-thriftserver.log.pos
  tag {{providerPrefix}}.HBASE_thriftserver
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/hbase/*hbase-MASTER*.log.out
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-hbase-master.log.pos
  tag {{providerPrefix}}.HBASE_master
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/hbase/*hbase-REGIONSERVER*.log.out
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-hbase-regionserver.log.pos
  tag {{providerPrefix}}.HBASE_regionserver
  read_from_head true
</source>
<source>
  @type tail
  format none
  path /var/run/cloudera-scm-agent/process/*/logs/stderr.log
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-scm-agent-process-stderr.log.pos
  tag {{providerPrefix}}_CM_COMMAND.ERROR.*
  read_from_head true
</source>
<source>
  @type tail
  format none
  path /var/run/cloudera-scm-agent/process/*/logs/stdout.log
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-scm-agent-process-stdout.log.pos
  tag {{providerPrefix}}_CM_COMMAND.OUT.*
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/hue/runcpserver.log
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-hue-runcpserver.log.pos
  tag {{providerPrefix}}.HUE-runcpserver
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/hue/error.log
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-hue-error.log.pos
  tag {{providerPrefix}}.HUE-error
  read_from_head true
</source>
<source>
  @type tail
  format none
  path {{fluent.serviceLogFolderPrefix}}/hue-httpd/error_log
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-hue-httpd-error.log.pos
  tag {{providerPrefix}}.HUE-HTTPD-error_log
  read_from_head true
</source>
<source>
  @type tail
  format none
  path /var/log/autossh-*.log
  pos_file /var/log/td-agent/pos/{{providerPrefix}}-autossh.log.pos
  tag {{providerPrefix}}.AUTOSSH
  read_from_head true
</source>
</worker>
{% else %}
# DATABUS inputs are disabled
{% endif %}
