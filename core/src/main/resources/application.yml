server:
  servlet:
    context-path: "/cb"
  shutdown: graceful
  tomcat:
    mbeanregistry:
      enabled: true

nodemanager:
  irrecoverable:
    healthchecks: NODE_MANAGER_HEALTH_CHECKER,NODE_MANAGER_SCM_HEALTH,NODEMANAGER_RECOVERY_DIRECTORY_FREE_SPACE,NODE_MANAGER_LOG_DIRECTORY_FREE_SPACE

management:
  endpoints:
    web:
      base-path: "/"
      exposure:
        include: info,health,prometheus
      path-mapping:
        prometheus: metrics
  endpoint:
    metrics:
      enabled: true
      export:
        prometheus:
          enabled: true
    prometheus:
      enabled: true
    health:
      probes:
        enabled: true
      group:
        readiness:
          include: "readinessState,hikariState"
  metrics:
    distribution:
      slo:
        "[http.server.requests]": "125ms, 250ms, 500ms, 1s, 2s"
      percentiles:
        "[http.server.requests]": "0.5, 0.95"
  info:
    env:
      enabled: true

info:
  app:
    capabilities: gov_cloud

spring:
  application:
    name: CloudbreakService
  freemarker:
    template-loader-path: file:/etc/cloudbreak,classpath:/
    prefer-file-system-access: false
  datasource:
    maxActive: 30
  jpa:
    properties:
      hibernate:
        generate_statistics: true
        jdbc:
          batch_size: 400
        order_inserts: true
        order_updates: true
  lifecycle:
    timeout-per-shutdown-phase: 60s
  main:
    allow-circular-references: true

rest:
  debug: false

cert:
  validation: true
  ignorePreValidation: true

secret:
  application: cb/shared
  engine: "com.sequenceiq.cloudbreak.service.secret.vault.VaultKvV2Engine"

secretrotation:
    secretTypeEnumClass: CloudbreakSecretType

vault:
  addr: localhost
  port: 8200
  ssl.enabled: false
  kv.engine.v2.path: secret
  config.enabled: true
  auth:
    type: "token"
    kubernetes:
      service.account.token.path: /var/run/secrets/kubernetes.io/serviceaccount/token
      mount.path: "dps-dev"
      login.role: "cloudbreak.default"

flow:
  schema:
    migration:
      auto: false

distrox:
  gateway:
    topology:
      name: cdp-proxy
    ssotype: SSO_PROVIDER
  restrict:
    instance:
      types: true

datalake:
  validateAvailability: true

altus:
  audit:
    enabled: true
    endpoint: localhost:8982
  ums:
    caller: cloudbreak

cb:
  enabledplatforms: AWS,AZURE,YARN,GCP,MOCK
  enabledgovplatforms: AWS
  enabled.linux.types: redhat6,redhat7,redhat8,redhat9,centos6,centos7
  default.gateway.cidr: 0.0.0.0/0
  ccmRevertJob:
    activationInMinutes: 5
  publicip:
  etc.config.dir: /etc/cloudbreak
  threadpool:
    core.size: 100
    capacity.size: 4000
  intermediate.threadpool:
    core.size: 100
    capacity.size: 4000
  environment:
    url: http://localhost:8088
    contextPath: /environmentservice
  freeipa:
    image.catalog.url: https://cloudbreak-imagecatalog.s3.amazonaws.com/v3-prod-freeipa-image-catalog.json
    url: http://localhost:8090
    contextPath: /freeipa
    dns:
      ttl: 30
  sdx:
    url: http://localhost:8086
    contextPath: /dl
  redbeams:
    url: http://localhost:8087
    contextPath: /redbeams
  periscope:
    url: http://localhost:8085
    contextPath: /as
    connection.timeout: 2000
    read.timeout: 10000
    skipEntitlementCheckPlatforms: MOCK
  runtimes:
    latest: "7.3.2"
    gov: "7.2.18"

  host.discovery.custom.hostname.enabled: false

  cert:
    dir: /certs/

  smtp.sender:
    host:
    port: 25
    username:
    password:
    from: no-reply@sequenceiq.com

  secret.rotation:
    kmskey.rotationPeriodInDays: 365

  db.env:
    user: postgres
    pass:
    db: cbdb
    schema: public
    cert.file: database.crt
    ssl: false
    embedded.volume:
      size: 100
      platformVolumeTypeMap:
        AWS: gp3
        AZURE: StandardSSD_LRS
        GCP: pd-ssd
        MOCK: magnetic
    upgrade:
      embedded.targetversion: VERSION_17
      rds:
        targetversion: VERSION_14
      rds.backuprestore:
        cloudplatforms: AZURE
        validationratio: 0.2

  externaldatabase:
    ssl.rootcerts.path: /hadoopfs/fs1/database-cacerts/certs.pem
    sslenforcement.supported.platform: GCP,AWS,AZURE
    gcp.sslmode: verify-ca
  limit:
    primaryGatewayRecommendations:
      -
        nodeCount: 400
        minCpu: 32
        minMemory: 128
        recommendedInstance:
          AWS: r5.8xlarge
          AZURE: Standard_D32s_v5
    nodeCountLimits:
      safe:
        cm: 800
        infrastructure: 800
        upgrade: 800
      experimental:
        cm: 1000
        infrastructure: 1000
        upgrade: 1000

  imd.update.types:
    IMDS_HTTP_TOKEN_REQUIRED:
      supportedPlatforms: AWS
      metadata:
        AWS:
          imdsVersion: v2
    IMDS_HTTP_TOKEN_OPTIONAL:
      supportedPlatforms: AWS
      metadata:
        AWS:
          imdsVersion: v1

  aws:
    spotinstances.enabled: true
    disabled.instance.types:
    hostkey.verify: false
    role.session.name: cdp-provisioning
    cf.template.new.path: templates/aws-cf-stack.ftl
    cf.network.template.path: templates/aws-cf-network.ftl
    cf.template.newdb.path: templates/aws-cf-dbstack.ftl
    default.inbound.security.group:
    vpc:
    vpcendpoints:
      enabled.gateway.services: s3,dynamodb
    externaldatabase:
      ha:
        retentionperiod: 30
      nonha:
        retentionperiod: 0
    credential.cache.ttl: 60
    kms.delete.pendingWindowInDays: 7

  azure:
    host.name.prefix.length: 255
    poller:
      dns:
        checkinterval: 2000
        maxattempt: 60
        maxfailurenumber: 5
      image:
        checkinterval: 1000
        maxattempt: 100
        maxfailurenumber: 5
      storage:
        checkinterval: 1000
        maxattempt: 30
        maxfailurenumber: 5
    database.template.batchSize: 1
    externaldatabase:
      ha:
        retentionperiod: 30
        georedundantbackup: false
      nonha:
        retentionperiod: 7
        georedundantbackup: false

  os:
    enable.autoimport: true
    import:
      root.url.pattern: http://public-repo-1.hortonworks.com/HDP/cloudbreak/%s.img
      from.format: qcow2
      disk.format: qcow2
      container.format: bare



  yarn:
    domain: default.com
    defaultQueue: "default"
    defaultLifeTime: 604800

  blueprint:
    cm:
      gov:
        exclusions:
          7.2.16: cdp-flow-management,cdp-flow-management-small,cdp-flink-heavy,cdp-flink-light,cdp-data-engineering-spark3-ha,cdp-rt-data-mart-spark3
          7.2.17: cdp-flow-management,cdp-flow-management-small,cdp-flink-heavy,cdp-flink-light,cdp-data-engineering-spark3-ha,cdp-rt-data-mart-spark3
          default: cdp-flow-management,cdp-flow-management-small,cdp-flink-heavy,cdp-flink-light,cdp-flink-light-ha,cdp-flink-heavy-ha,cdp-flow-management-nifi-2,cdp-flow-management-small-nifi-2,cdp-iceberg
      defaults:
        7.2.7: >
          7.2.7 - SDX Light Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx;
          7.2.7 - SDX Medium Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx-medium-ha;
          7.2.7 - Data Engineering: Apache Spark, Apache Hive, Apache Oozie=cdp-data-engineering;
          7.2.7 - Data Engineering: HA: Apache Spark, Apache Hive, Apache Oozie=cdp-data-engineering-ha;
          7.2.7 - Data Engineering: Apache Spark3=cdp-data-engineering-spark3;
          7.2.7 - Data Mart: Apache Impala, Hue=cdp-data-mart;
          7.2.7 - Real-time Data Mart: Apache Impala, Hue, Apache Kudu, Apache Spark=cdp-rt-data-mart;
          7.2.7 - Streams Messaging Heavy Duty: Apache Kafka, Schema Registry, Streams Messaging Manager, Streams Replication Manager=cdp-streaming;
          7.2.7 - Streams Messaging Light Duty: Apache Kafka, Schema Registry, Streams Messaging Manager, Streams Replication Manager=cdp-streaming-small;
          7.2.7 - Flow Management Light Duty with Apache NiFi, Apache NiFi Registry=cdp-flow-management-small;
          7.2.7 - Flow Management Heavy Duty with Apache NiFi, Apache NiFi Registry=cdp-flow-management;
          7.2.7 - Data Discovery and Exploration=cdp-dde;
          7.2.7 - COD Edge Node=cdp-cod-edge-node
        7.2.8: >
          7.2.8 - SDX Light Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx;
          7.2.8 - SDX Medium Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx-medium-ha;
          7.2.8 - Data Engineering: Apache Spark, Apache Hive, Apache Oozie=cdp-data-engineering;
          7.2.8 - Data Engineering: HA: Apache Spark, Apache Hive, Apache Oozie=cdp-data-engineering-ha;
          7.2.8 - Data Engineering: Apache Spark3=cdp-data-engineering-spark3;
          7.2.8 - Data Mart: Apache Impala, Hue=cdp-data-mart;
          7.2.8 - Real-time Data Mart: Apache Impala, Hue, Apache Kudu, Apache Spark=cdp-rt-data-mart;
          7.2.8 - Streams Messaging Heavy Duty: Apache Kafka, Schema Registry, Streams Messaging Manager, Streams Replication Manager=cdp-streaming;
          7.2.8 - Streams Messaging Light Duty: Apache Kafka, Schema Registry, Streams Messaging Manager, Streams Replication Manager=cdp-streaming-small;
          7.2.8 - Flow Management Light Duty with Apache NiFi, Apache NiFi Registry=cdp-flow-management-small;
          7.2.8 - Flow Management Heavy Duty with Apache NiFi, Apache NiFi Registry=cdp-flow-management;
          7.2.8 - Data Discovery and Exploration=cdp-dde;
          7.2.8 - COD Edge Node=cdp-cod-edge-node
        7.2.9: >
          7.2.9 - SDX Light Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx;
          7.2.9 - SDX Medium Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx-medium-ha;
          7.2.9 - Data Engineering: Apache Spark, Apache Hive, Apache Oozie=cdp-data-engineering;
          7.2.9 - Data Engineering: HA: Apache Spark, Apache Hive, Apache Oozie=cdp-data-engineering-ha;
          7.2.9 - Data Engineering: Apache Spark3=cdp-data-engineering-spark3;
          7.2.9 - Data Mart: Apache Impala, Hue=cdp-data-mart;
          7.2.9 - Real-time Data Mart: Apache Impala, Hue, Apache Kudu, Apache Spark=cdp-rt-data-mart;
          7.2.9 - Streams Messaging Heavy Duty: Apache Kafka, Schema Registry, Streams Messaging Manager, Streams Replication Manager=cdp-streaming;
          7.2.9 - Streams Messaging Light Duty: Apache Kafka, Schema Registry, Streams Messaging Manager, Streams Replication Manager=cdp-streaming-small;
          7.2.9 - Flow Management Light Duty with Apache NiFi, Apache NiFi Registry=cdp-flow-management-small;
          7.2.9 - Flow Management Heavy Duty with Apache NiFi, Apache NiFi Registry=cdp-flow-management;
          7.2.9 - Data Discovery and Exploration=cdp-dde;
          7.2.9 - COD Edge Node=cdp-cod-edge-node
        7.2.10: >
          7.2.10 - SDX Light Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx;
          7.2.10 - SDX Medium Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx-medium-ha;
          7.2.10 - Data Engineering: Apache Spark, Apache Hive, Apache Oozie=cdp-data-engineering;
          7.2.10 - Data Engineering: HA: Apache Spark, Apache Hive, Apache Oozie=cdp-data-engineering-ha;
          7.2.10 - Data Engineering: Apache Spark3=cdp-data-engineering-spark3;
          7.2.10 - Data Mart: Apache Impala, Hue=cdp-data-mart;
          7.2.10 - Real-time Data Mart: Apache Impala, Hue, Apache Kudu, Apache Spark=cdp-rt-data-mart;
          7.2.10 - Operational Database: Apache HBase, Phoenix=cdp-opdb;
          7.2.10 - Streams Messaging Heavy Duty: Apache Kafka, Schema Registry, Streams Messaging Manager, Streams Replication Manager=cdp-streaming;
          7.2.10 - Streams Messaging Light Duty: Apache Kafka, Schema Registry, Streams Messaging Manager, Streams Replication Manager=cdp-streaming-small;
          7.2.10 - Flow Management Light Duty with Apache NiFi, Apache NiFi Registry=cdp-flow-management-small;
          7.2.10 - Flow Management Heavy Duty with Apache NiFi, Apache NiFi Registry=cdp-flow-management;
          7.2.10 - Data Discovery and Exploration=cdp-dde;
          7.2.10 - COD Edge Node=cdp-cod-edge-node
        7.2.11: >
          7.2.11 - SDX Light Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx;
          7.2.11 - SDX Medium Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx-medium-ha;
          7.2.11 - Data Engineering: Apache Spark, Apache Hive, Apache Oozie=cdp-data-engineering;
          7.2.11 - Data Engineering: HA: Apache Spark, Apache Hive, Apache Oozie=cdp-data-engineering-ha;
          7.2.11 - Data Engineering: Apache Spark3=cdp-data-engineering-spark3;
          7.2.11 - Data Mart: Apache Impala, Hue=cdp-data-mart;
          7.2.11 - Real-time Data Mart: Apache Impala, Hue, Apache Kudu, Apache Spark=cdp-rt-data-mart;
          7.2.11 - Operational Database: Apache HBase, Phoenix=cdp-opdb;
          7.2.11 - Streams Messaging Heavy Duty: Apache Kafka, Schema Registry, Streams Messaging Manager, Streams Replication Manager=cdp-streaming;
          7.2.11 - Streams Messaging Light Duty: Apache Kafka, Schema Registry, Streams Messaging Manager, Streams Replication Manager=cdp-streaming-small;
          7.2.11 - Flow Management Light Duty with Apache NiFi, Apache NiFi Registry=cdp-flow-management-small;
          7.2.11 - Flow Management Heavy Duty with Apache NiFi, Apache NiFi Registry=cdp-flow-management;
          7.2.11 - Data Discovery and Exploration=cdp-dde;
          7.2.11 - Streaming Analytics Light Duty with Apache Flink=cdp-flink-light;
          7.2.11 - Streaming Analytics Heavy Duty with Apache Flink=cdp-flink-heavy;
          7.2.11 - COD Edge Node=cdp-cod-edge-node
        7.2.12: >
          7.2.12 - SDX Micro Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx-micro;
          7.2.12 - SDX Light Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx;
          7.2.12 - SDX Medium Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx-medium-ha;
          7.2.12 - Data Engineering: Apache Spark, Apache Hive, Apache Oozie=cdp-data-engineering;
          7.2.12 - Data Engineering: HA: Apache Spark, Apache Hive, Apache Oozie=cdp-data-engineering-ha;
          7.2.12 - Data Engineering: Apache Spark3=cdp-data-engineering-spark3;
          7.2.12 - Data Mart: Apache Impala, Hue=cdp-data-mart;
          7.2.12 - Real-time Data Mart: Apache Impala, Hue, Apache Kudu, Apache Spark=cdp-rt-data-mart;
          7.2.12 - Operational Database: Apache HBase, Phoenix=cdp-opdb;
          7.2.12 - Streams Messaging Heavy Duty: Apache Kafka, Schema Registry, Streams Messaging Manager, Streams Replication Manager, Cruise Control=cdp-streaming;
          7.2.12 - Streams Messaging Light Duty: Apache Kafka, Schema Registry, Streams Messaging Manager, Streams Replication Manager, Cruise Control=cdp-streaming-small;
          7.2.12 - Flow Management Light Duty with Apache NiFi, Apache NiFi Registry=cdp-flow-management-small;
          7.2.12 - Flow Management Heavy Duty with Apache NiFi, Apache NiFi Registry=cdp-flow-management;
          7.2.12 - Data Discovery and Exploration=cdp-dde;
          7.2.12 - Streaming Analytics Light Duty with Apache Flink=cdp-flink-light;
          7.2.12 - Streaming Analytics Heavy Duty with Apache Flink=cdp-flink-heavy;
          7.2.12 - COD Edge Node=cdp-cod-edge-node
        7.2.14: >
          7.2.14 - SDX Micro Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx-micro;
          7.2.14 - SDX Light Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx;
          7.2.14 - SDX Medium Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx-medium-ha;
          7.2.14 - SDX Medium Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas, Profiler Manager=cdp-sdx-medium-ha-profiler;
          7.2.14 - Data Engineering: Apache Spark, Apache Hive, Apache Oozie=cdp-data-engineering;
          7.2.14 - Data Engineering: HA: Apache Spark, Apache Hive, Apache Oozie=cdp-data-engineering-ha;
          7.2.14 - Data Engineering: Apache Spark3=cdp-data-engineering-spark3;
          7.2.14 - Data Mart: Apache Impala, Hue=cdp-data-mart;
          7.2.14 - Real-time Data Mart: Apache Impala, Hue, Apache Kudu, Apache Spark=cdp-rt-data-mart;
          7.2.14 - Streams Messaging Heavy Duty: Apache Kafka, Schema Registry, Streams Messaging Manager, Streams Replication Manager, Cruise Control=cdp-streaming;
          7.2.14 - Streams Messaging Light Duty: Apache Kafka, Schema Registry, Streams Messaging Manager, Streams Replication Manager, Cruise Control=cdp-streaming-small;
          7.2.14 - Flow Management Light Duty with Apache NiFi, Apache NiFi Registry=cdp-flow-management-small;
          7.2.14 - Flow Management Heavy Duty with Apache NiFi, Apache NiFi Registry=cdp-flow-management;
          7.2.14 - Data Discovery and Exploration=cdp-dde;
          7.2.14 - Streaming Analytics Light Duty with Apache Flink=cdp-flink-light;
          7.2.14 - Streaming Analytics Heavy Duty with Apache Flink=cdp-flink-heavy;
          7.2.14 - COD Edge Node=cdp-cod-edge-node
        7.2.15: >
          7.2.15 - SDX Micro Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx-micro;
          7.2.15 - SDX Light Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx;
          7.2.15 - SDX Medium Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx-medium-ha;
          7.2.15 - SDX Medium Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas, Profiler Manager=cdp-sdx-medium-ha-profiler;
          7.2.15 - Data Engineering: Apache Spark, Apache Hive, Apache Oozie=cdp-data-engineering;
          7.2.15 - Data Engineering: HA: Apache Spark, Apache Hive, Apache Oozie=cdp-data-engineering-ha;
          7.2.15 - Data Engineering: Apache Spark3=cdp-data-engineering-spark3;
          7.2.15 - Data Mart: Apache Impala, Hue=cdp-data-mart;
          7.2.15 - Real-time Data Mart: Apache Impala, Hue, Apache Kudu, Apache Spark=cdp-rt-data-mart;
          7.2.15 - Streams Messaging High Availability: Apache Kafka, Schema Registry, Streams Messaging Manager, Streams Replication Manager, Cruise Control=cdp-streaming-ha;
          7.2.15 - Streams Messaging Heavy Duty: Apache Kafka, Schema Registry, Streams Messaging Manager, Streams Replication Manager, Cruise Control=cdp-streaming;
          7.2.15 - Streams Messaging Light Duty: Apache Kafka, Schema Registry, Streams Messaging Manager, Streams Replication Manager, Cruise Control=cdp-streaming-small;
          7.2.15 - Flow Management Light Duty with Apache NiFi, Apache NiFi Registry=cdp-flow-management-small;
          7.2.15 - Flow Management Heavy Duty with Apache NiFi, Apache NiFi Registry=cdp-flow-management;
          7.2.15 - Data Discovery and Exploration=cdp-dde;
          7.2.15 - Search Analytics=cdp-search-analytics;
          7.2.15 - Streaming Analytics Light Duty with Apache Flink=cdp-flink-light;
          7.2.15 - Streaming Analytics Heavy Duty with Apache Flink=cdp-flink-heavy;
          7.2.15 - COD Edge Node=cdp-cod-edge-node
        7.2.16: >
          7.2.16 - SDX Micro Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx-micro;
          7.2.16 - SDX Light Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx;
          7.2.16 - SDX Medium Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx-medium-ha;
          7.2.16 - SDX Medium Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas, Profiler Manager=cdp-sdx-medium-ha-profiler;
          7.2.16 - Data Engineering: Apache Spark, Apache Hive, Apache Oozie=cdp-data-engineering;
          7.2.16 - Data Engineering: HA: Apache Spark, Apache Hive, Apache Oozie=cdp-data-engineering-ha;
          7.2.16 - Data Engineering: HA: Apache Spark3, Apache Hive, Apache Oozie=cdp-data-engineering-spark3-ha;
          7.2.16 - Data Engineering: Apache Spark3=cdp-data-engineering-spark3;
          7.2.16 - Data Mart: Apache Impala, Hue=cdp-data-mart;
          7.2.16 - Real-time Data Mart: Apache Impala, Hue, Apache Kudu, Apache Spark=cdp-rt-data-mart;
          7.2.16 - Real-time Data Mart: Apache Impala, Hue, Apache Kudu, Apache Spark3=cdp-rt-data-mart-spark3;
          7.2.16 - Streams Messaging High Availability: Apache Kafka, Schema Registry, Streams Messaging Manager, Streams Replication Manager, Cruise Control=cdp-streaming-ha;
          7.2.16 - Streams Messaging Heavy Duty: Apache Kafka, Schema Registry, Streams Messaging Manager, Streams Replication Manager, Cruise Control=cdp-streaming;
          7.2.16 - Streams Messaging Light Duty: Apache Kafka, Schema Registry, Streams Messaging Manager, Streams Replication Manager, Cruise Control=cdp-streaming-small;
          7.2.16 - Flow Management Light Duty with Apache NiFi, Apache NiFi Registry=cdp-flow-management-small;
          7.2.16 - Flow Management Heavy Duty with Apache NiFi, Apache NiFi Registry=cdp-flow-management;
          7.2.16 - Data Discovery and Exploration=cdp-dde;
          7.2.16 - Search Analytics=cdp-search-analytics;
          7.2.16 - Streaming Analytics Light Duty with Apache Flink=cdp-flink-light;
          7.2.16 - Streaming Analytics Heavy Duty with Apache Flink=cdp-flink-heavy;
          7.2.16 - COD Edge Node=cdp-cod-edge-node
        7.2.17: >
          7.2.17 - SDX Micro Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx-micro;
          7.2.17 - SDX Light Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx;
          7.2.17 - SDX Medium Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx-medium-ha;
          7.2.17 - SDX Medium Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas, Profiler Manager=cdp-sdx-medium-ha-profiler;
          7.2.17 - SDX Enterprise: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx-enterprise;
          7.2.17 - Data Engineering: Apache Spark, Apache Hive, Apache Oozie=cdp-data-engineering;
          7.2.17 - Data Engineering: HA: Apache Spark, Apache Hive, Apache Oozie=cdp-data-engineering-ha;
          7.2.17 - Data Engineering: HA: Apache Spark3, Apache Hive, Apache Oozie=cdp-data-engineering-spark3-ha;
          7.2.17 - Data Engineering: Apache Spark3=cdp-data-engineering-spark3;
          7.2.17 - Data Mart: Apache Impala, Hue=cdp-data-mart;
          7.2.17 - Real-time Data Mart: Apache Impala, Hue, Apache Kudu, Apache Spark=cdp-rt-data-mart;
          7.2.17 - Real-time Data Mart: Apache Impala, Hue, Apache Kudu, Apache Spark3=cdp-rt-data-mart-spark3;
          7.2.17 - Streams Messaging High Availability: Apache Kafka, Schema Registry, Streams Messaging Manager, Streams Replication Manager, Cruise Control=cdp-streaming-ha;
          7.2.17 - Streams Messaging Heavy Duty: Apache Kafka, Schema Registry, Streams Messaging Manager, Streams Replication Manager, Cruise Control=cdp-streaming;
          7.2.17 - Streams Messaging Light Duty: Apache Kafka, Schema Registry, Streams Messaging Manager, Streams Replication Manager, Cruise Control=cdp-streaming-small;
          7.2.17 - Flow Management Light Duty with Apache NiFi, Apache NiFi Registry, Schema Registry=cdp-flow-management-small;
          7.2.17 - Flow Management Heavy Duty with Apache NiFi, Apache NiFi Registry, Schema Registry=cdp-flow-management;
          7.2.17 - Data Discovery and Exploration=cdp-dde;
          7.2.17 - Search Analytics=cdp-search-analytics;
          7.2.17 - Streaming Analytics Light Duty with Apache Flink=cdp-flink-light;
          7.2.17 - Streaming Analytics Heavy Duty with Apache Flink=cdp-flink-heavy;
          7.2.17 - COD Edge Node=cdp-cod-edge-node;
          7.2.17 - Edge Flow Management Light Duty=cdp-edge-flow-management-small
        7.2.18: >
          7.2.18 - SDX Micro Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx-micro;
          7.2.18 - SDX Light Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx;
          7.2.18 - SDX Medium Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx-medium-ha;
          7.2.18 - SDX Medium Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas, Profiler Manager=cdp-sdx-medium-ha-profiler;
          7.2.18 - SDX Enterprise: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx-enterprise;
          7.2.18 - Data Engineering: HA: Apache Spark3, Apache Hive, Apache Oozie=cdp-data-engineering-spark3-ha;
          7.2.18 - Data Engineering: Apache Spark3, Apache Hive, Apache Oozie=cdp-data-engineering-spark3;
          7.2.18 - Data Mart: Apache Impala, Hue=cdp-data-mart;
          7.2.18 - Real-time Data Mart: Apache Impala, Hue, Apache Kudu, Apache Spark3=cdp-rt-data-mart-spark3;
          7.2.18 - Streams Messaging High Availability: Apache Kafka, Schema Registry, Streams Messaging Manager, Streams Replication Manager, Cruise Control=cdp-streaming-ha;
          7.2.18 - Streams Messaging Heavy Duty: Apache Kafka, Schema Registry, Streams Messaging Manager, Streams Replication Manager, Cruise Control=cdp-streaming;
          7.2.18 - Streams Messaging Light Duty: Apache Kafka, Schema Registry, Streams Messaging Manager, Streams Replication Manager, Cruise Control=cdp-streaming-small;
          7.2.18 - Flow Management Light Duty with Apache NiFi, Apache NiFi Registry, Schema Registry=cdp-flow-management-small;
          7.2.18 - Flow Management Heavy Duty with Apache NiFi, Apache NiFi Registry, Schema Registry=cdp-flow-management;
          7.2.18 - NiFi 2 - Flow Management Light Duty with Apache NiFi, Apache NiFi Registry, Schema Registry=cdp-flow-management-small-nifi-2;
          7.2.18 - NiFi 2 - Flow Management Heavy Duty with Apache NiFi, Apache NiFi Registry, Schema Registry=cdp-flow-management-nifi-2;
          7.2.18 - Data Discovery and Exploration for Spark3=cdp-dde-spark3;
          7.2.18 - Search Analytics=cdp-search-analytics;
          7.2.18 - Streaming Analytics Light Duty with Apache Flink=cdp-flink-light;
          7.2.18 - Streaming Analytics Heavy Duty with Apache Flink=cdp-flink-heavy;
          7.2.18 - COD Edge Node=cdp-cod-edge-node;
          7.2.18 - Edge Flow Management Light Duty=cdp-edge-flow-management-small;
          7.2.18 - Data Lifecycle Manager=cdp-dlm;
          7.2.18 - Iceberg Replication Service=cdp-iceberg
        7.3.1: >
          7.3.1 - SDX Micro Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx-micro;
          7.3.1 - SDX Light Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx;
          7.3.1 - SDX Medium Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx-medium-ha;
          7.3.1 - SDX Medium Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas, Profiler Manager=cdp-sdx-medium-ha-profiler;
          7.3.1 - SDX Enterprise: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx-enterprise;
          7.3.1 - Data Engineering: HA: Apache Spark3, Apache Hive, Apache Oozie=cdp-data-engineering-spark3-ha;
          7.3.1 - Data Engineering: Apache Spark3, Apache Hive, Apache Oozie=cdp-data-engineering-spark3;
          7.3.1 - Hybrid Data Engineering: HA: Apache Spark3, Apache Hive=cdp-hybrid-data-engineering-spark3-ha;
          7.3.1 - Data Mart: Apache Impala, Hue=cdp-data-mart;
          7.3.1 - Real-time Data Mart: Apache Impala, Hue, Apache Kudu, Apache Spark3=cdp-rt-data-mart-spark3;
          7.3.1 - Streams Messaging High Availability: Apache Kafka, Schema Registry, Streams Messaging Manager, Streams Replication Manager, Cruise Control=cdp-streaming-ha;
          7.3.1 - Streams Messaging Heavy Duty: Apache Kafka, Schema Registry, Streams Messaging Manager, Streams Replication Manager, Cruise Control=cdp-streaming;
          7.3.1 - Streams Messaging Light Duty: Apache Kafka, Schema Registry, Streams Messaging Manager, Streams Replication Manager, Cruise Control=cdp-streaming-small;
          7.3.1 - Flow Management Light Duty with Apache NiFi, Apache NiFi Registry, Schema Registry=cdp-flow-management-small;
          7.3.1 - Flow Management Heavy Duty with Apache NiFi, Apache NiFi Registry, Schema Registry=cdp-flow-management;
          7.3.1 - NiFi 2 - Flow Management Light Duty with Apache NiFi, Apache NiFi Registry, Schema Registry=cdp-flow-management-small-nifi-2;
          7.3.1 - NiFi 2 - Flow Management Heavy Duty with Apache NiFi, Apache NiFi Registry, Schema Registry=cdp-flow-management-nifi-2;
          7.3.1 - Data Discovery and Exploration for Spark3=cdp-dde-spark3;
          7.3.1 - Search Analytics=cdp-search-analytics;
          7.3.1 - Streaming Analytics Light Duty with Apache Flink=cdp-flink-light;
          7.3.1 - Streaming Analytics Heavy Duty with Apache Flink=cdp-flink-heavy;
          7.3.1 - Streaming Analytics Light Duty High Availability with Apache Flink=cdp-flink-light-ha;
          7.3.1 - Streaming Analytics Heavy Duty High Availability with Apache Flink=cdp-flink-heavy-ha;
          7.3.1 - COD Edge Node=cdp-cod-edge-node;
          7.3.1 - Edge Flow Management Light Duty=cdp-edge-flow-management-small;
          7.3.1 - Lakehouse Optimizer=cdp-lakehouse-optimizer
        7.3.2: >
          7.3.2 - SDX Micro Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx-micro;
          7.3.2 - SDX Light Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx;
          7.3.2 - SDX Medium Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx-medium-ha;
          7.3.2 - SDX Medium Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas, Profiler Manager=cdp-sdx-medium-ha-profiler;
          7.3.2 - SDX Enterprise: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx-enterprise;
          7.3.2 - Data Engineering: HA: Apache Spark3, Apache Hive, Apache Oozie=cdp-data-engineering-spark3-ha;
          7.3.2 - Data Engineering: Apache Spark3, Apache Hive, Apache Oozie=cdp-data-engineering-spark3;
          7.3.2 - Hybrid Data Engineering: HA: Apache Spark3, Apache Hive=cdp-hybrid-data-engineering-spark3-ha;
          7.3.2 - Data Mart: Apache Impala, Hue=cdp-data-mart;
          7.3.2 - Real-time Data Mart: Apache Impala, Hue, Apache Kudu, Apache Spark3=cdp-rt-data-mart-spark3;
          7.3.2 - Streams Messaging High Availability: Apache Kafka, Schema Registry, Streams Messaging Manager, Streams Replication Manager, Cruise Control=cdp-streaming-ha;
          7.3.2 - Streams Messaging Heavy Duty: Apache Kafka, Schema Registry, Streams Messaging Manager, Streams Replication Manager, Cruise Control=cdp-streaming;
          7.3.2 - Streams Messaging Light Duty: Apache Kafka, Schema Registry, Streams Messaging Manager, Streams Replication Manager, Cruise Control=cdp-streaming-small;
          7.3.2 - Flow Management Light Duty with Apache NiFi, Apache NiFi Registry, Schema Registry=cdp-flow-management-small;
          7.3.2 - Flow Management Heavy Duty with Apache NiFi, Apache NiFi Registry, Schema Registry=cdp-flow-management;
          7.3.2 - NiFi 2 - Flow Management Light Duty with Apache NiFi, Apache NiFi Registry, Schema Registry=cdp-flow-management-small-nifi-2;
          7.3.2 - NiFi 2 - Flow Management Heavy Duty with Apache NiFi, Apache NiFi Registry, Schema Registry=cdp-flow-management-nifi-2;
          7.3.2 - Data Discovery and Exploration for Spark3=cdp-dde-spark3;
          7.3.2 - Search Analytics=cdp-search-analytics;
          7.3.2 - Streaming Analytics Light Duty with Apache Flink=cdp-flink-light;
          7.3.2 - Streaming Analytics Heavy Duty with Apache Flink=cdp-flink-heavy;
          7.3.2 - Streaming Analytics Light Duty High Availability with Apache Flink=cdp-flink-light-ha;
          7.3.2 - Streaming Analytics Heavy Duty High Availability with Apache Flink=cdp-flink-heavy-ha;
          7.3.2 - COD Edge Node=cdp-cod-edge-node;
          7.3.2 - Edge Flow Management Light Duty=cdp-edge-flow-management-small;
          7.3.2 - Lakehouse Optimizer=cdp-lakehouse-optimizer;
          7.3.2 - Iceberg Replication Service=cdp-iceberg

  clustertemplate.defaults:
  template.defaults: minviable-gcp,minviable-azure-managed-disks,minviable-aws

  customUserData: |
    touch /tmp/custom-user-data
    date >> /tmp/custom-user-data
  userDataSecrets:
    saltBootPassword: SALT_BOOT_PASSWORD
    proxyPassword: PROXY_PASSWORD
    ccmTunnelInitiatorId: CCM_TUNNEL_INITIATOR_ID
    ccmKeyId: CCM_KEY_ID
    ccmEncipheredPrivateKey: CCM_ENCIPHERED_PRIVATE_KEY
    ccmV2AgentKeyId: CCM_V2_AGENT_KEY_ID
    ccmV2AgentEncipheredKey: CCM_V2_AGENT_ENCIPHERED_KEY
    ccmV2AgentCertificate: CCM_V2_AGENT_CERTIFICATE
    ccmV2AgentMachineUserEncipheredAccessKey: CCM_V2_AGENT_ENCIPHERED_ACCESS_KEY
    ccmV2AgentHmacKey: CCM_V2_AGENT_HMAC_KEY
    ccmV2AgentIv: CCM_V2_IV
    ccmV2AgentHmacForPrivateKey: CCM_V2_AGENT_HMAC_FOR_PRIVATE_KEY

  mail:
    smtp:
      auth: true
      type: smtp
      starttls.enable: true
  success.cluster.installer.mail.template.path: templates/cluster-installer-mail-success.ftl
  failed.cluster.installer.mail.template.path: templates/cluster-installer-mail-fail.ftl

  arm:
    template.remove.publicip.path: templates/arm-remove-public-ip-associations.ftl
    template.attach.publicip.path: templates/arm-attach-public-ip-associations.ftl
    template.path: templates/arm-v2.ftl
    network.template.path: templates/arm-network.ftl
    parameter.path: templates/parameters.ftl
    database.template.path: templates/arm-database.ftl
    storageaccount.template.path: templates/arm-storageaccount.ftl
    app.creation.template:
      command.path: templates/app-creation-command.ftl
      command.audit.path: templates/app-audit-creation-command.ftl
      json.path: templates/app-creation.json
      resource:
        app.id: 797f4846-ba00-4fd7-ba43-dac1f8f63013
        access.scope.id: 41094075-9dad-400e-a0bd-54e686782033

  max:
    azure.resource.name.length: 120
    gcp.resource.name.length: 63
    aws.resource.name.length: 50
    aws.loadbalancer.resource.name.length: 32
    yarn.resource.name.length: 63

    salt.new.service.retry: 180
    salt.new.service.leave.retry: 5
    salt.new.service.retry.onerror: 20
    salt.recipe.execution.retry: 180
    salt.modifygrain:
        maxretry: 30
        maxerrorretry: 10

  address.resolving.timeout: 60000

  cloud.api.executorservice.pool.size: 40
  reactor.executorservice.pool.size: 40

  platform.default:
    variants: AWS:AWS
    govVariants: AWS:AWS_NATIVE_GOV
    regions: AWS:eu-west-1,AZURE:North Europe,GCP:europe-west1,YARN:default,MOCK:USA
    rootVolumeSize:
      AWS: 200
      AZURE: 200
      GCP: 200
      MOCK: 200
    gatewayRootVolumeSize:
      AWS: 300
      AZURE: 300
      GCP: 300
      MOCK: 300

  gcp:
    hostkey.verify: false
    disk.encryption.url: https://cloud-certs.storage.googleapis.com/google-cloud-csek-ingress.pem
    externaldatabase:
      ha:
        retentionperiod: 30
        georedundantbackup: true
      nonha:
        retentionperiod: 7
        georedundantbackup: false

  nginx:
    port: 9443
  knox:
    port: 8443
    gateway.security.dir: /mnt/cdp-luks/var/lib/knox/gateway/data/security
    idbroker.security.dir: /mnt/cdp-luks/var/lib/knox/idbroker/data/security
  http:
    retryableStatusCodes: 403,408,425,429,502,503,504,509
  https:
    port: 443
  ssh:
    port: 22
  nfs:
    port: 2049

  hive.database:
    user: hive
    db: hive
    port: 5432

  ranger.database:
    user: ranger
    db: ranger
    port: 5432

  profiler.admin.database:
    user: profiler_agent
    db: profiler_agent
    port: 5432

  profiler.metrics.database:
    user: profiler_metric
    db: profiler_metric
    port: 5432

  recovery:
    database.reuse: hive

  cm:
    admin.role: "ROLE_ADMIN"
    limited.admin.role: "ROLE_LIMITED_CLUSTER_ADMIN"
    dashboard.user.role: "ROLE_DASHBOARD_USER"
    user.role: "ROLE_USER"
    heartbeat.interval: 3
    missed.heartbeat.interval: 30
    kerberos.encryption.type: "aes256-cts"
    client:
      cluster.proxy.timeout: 120000
      connect.timeout.seconds: 125
      read.timeout.seconds: 125
      write.timeout.seconds: 125
      syncCommandPoller:
        interrupt.timeout.seconds: 120

  kerberos:
    secret:
      location: "/mnt/cdp-luks/etc"
      cCache.location: "/mnt/cdp-luks/kerberos-cache"
  workspace.service.cache.ttl: 15

  structuredevent:
    rest:
      enabled: true
      contentlogging: true

  image.catalog:
    cache.ttl: 15
    legacy.enabled: true
    default.os: redhat8

  instance:
    packages:
      - name: salt
        prewarmed: false
        grain: saltversion
      - name: salt-bootstrap
        prewarmed: false
        command: "salt-bootstrap version"
        commandVersionPattern: "Version: (.*)"
      - name: stack
        command: "cat /var/lib/cloudera-scm-agent/active_parcels.json | jq -r '.CDH'"
        commandVersionPattern: "(.*)-.*"
        prewarmed: true
      - name: cm
        pkg:
          - name: cloudera-manager-agent
            pattern: "(.*)-([0-9]+)[a-zA-z]*\\..*"
            validateForMultipleVersions: true
          - name: cloudera-manager-server
            pattern: "(.*)-([0-9]+)[a-zA-z]*\\..*"
            validateForMultipleVersions: false
        prewarmed: true
  paywall.url: "https://archive.cloudera.com/p/cdp-public/"

  loadBalancer:
    supportedPlatforms: AWS,YARN,AZURE,GCP
    health-check:
        port: 443
        path:
        protocol: TCP
        interval: 10
        probeDownThreshold: 2

  upscale:
    zombie.auto.cleanup.enabled: true
  upgrade:
    failure.sync:
      sdx.enabled: false
    validation:
      distrox:
        maxNumberOfInstancesForRollingUpgrade: 20
      cm:
        interruptableCommands: >
          global-estimate-host-statistics,
          ProcessStalenessCheckCommand
    servicesToRemove:
      DAS: 7.2.18
      ZEPPELIN: 7.3.1

  stopRestriction:
    restrictedCloudPlatform: AWS
    ephemeralCachingMinVersion: 2.48.0
    ephemeralOnlyMinVersion: 2.53.0
    permittedServiceRoleGroups:
      - name: general
        serviceRoles:
          - service: YARN
            role: NODEMANAGER
            required: false
          - service: IMPALA
            role: IMPALAD
            required: false
        roles:
          - role: GATEWAY
            required: false
  parcel:
    retry:
      maxAttempts: 5
      backOffDelay: 2000
      backOffMultiplier: 2
  validation:
    max.content.size: 8388608



cluster:
  monitoring:
    enabled: true
    databus:
      processing:
        workers: 1
        queueSizeLimit: 2000
  fetch.deleted.maxDaysLimit: 2


clusterProxy:
  url: http://localhost:10180/cluster-proxy
  enabled: true
  disabledPlatforms: MOCK
  readConfigPath: /rpc/readConfig
  registerConfigPath: /rpc/forceRegisterConfig
  updateConfigPath: /rpc/updateConfig
  removeConfigPath: /rpc/removeConfig

gateway:
  cert:
    generation:
        enabled: true
        enabled-for-mock: true
    polling:
      attempt: 50
      intervall: 10
    base.domain.name: cloudera.com

notification:
  urls: http://localhost:3000/notifications

crn:
  partition: cdp
  region: us-west-1

existing-stack-patcher:
  intervalInHours: 24
  maxInitialStartDelayInHours: 12
  patch-configs:
    update-outdated-vault-secrets:
      intervalMinutes: 5
      enabled: false
    unbound-restart:
      enabled: false
    logging-agent-auto-restart:
      enabled: false
      affected-version-from: 0.2.13
      date-after: '2019-11-24'
      date-before: '2022-01-18'
    logging-agent-auto-restart-v2:
      enabled: false
    disable-region-for-fluentd:
      enabled: false
      affected-version-from: 0.2.16
    metering-follow-inodes:
      enabled: false
    cluster-public-endpoint:
      enabled: false
      related-stacks:
    collect-db-engine-version:
      enabled: false
    user-data-migration:
      enabled: false
    user-data-ccmv2-setup:
      enabled: false
    embedded-db-certificate-rotation:
      enabled: false
    gcp-subnet-id-fix:
      enabled: false

dynamic-entitlement:
  entitlements:
    cb: CDP_CENTRAL_COMPUTE_MONITORING

provider-sync:
  resourcetype-list: AZURE_PUBLIC_IP,AZURE_NAT_GATEWAY,AZURE_NETWORK,AZURE_SUBNET,AZURE_LOAD_BALANCER,AZURE_NETWORK_INTERFACE
  enabled-providers: AZURE
  enabled: true

clusterdns:
  host: localhost
  port: 8982

sssd:
  entry.cache.timeout: 300
  memcache.timeout: 300
  heartbeat.timeout: 90
  nss.timeout: 30

flow.trigger.node.heartbeat.validation.enabled: true

cdp:
  structuredevent:
    rest:
      contentlogging: false

vm:
  default:
    javaVersions:
      - version: 8
        maxRuntimeVersion: 7.2.18
        minRuntimeVersion: 7.1.0
      - version: 17
        minRuntimeVersion: 7.3.1
  update:
    allowable:
      javaVersions:
        - version: 8
          minRuntimeVersion: 7.1.0
          maxRuntimeVersion: 7.3.1.X
        - version: 17
          minRuntimeVersion: 7.3.1.500